/*
 * Gradle file containing the task to build, testing and publish the Android Checkout SDK
 * from a CI system
 */

task buildCheckout() {
    def buildCheckout = tasks.findByPath(':checkout:assembleRelease')
    dependsOn clean
    dependsOn buildCheckout
    buildCheckout.mustRunAfter(clean)
}

task testCheckout() {
    def testCheckout = tasks.findByPath(':checkout:test')
    dependsOn testCheckout
}

task publishCheckout() {
    def publishCheckout = tasks.findByPath(':checkout:publishCheckout')
    dependsOn publishCheckout
}

task testExampleApps() {
    def testExampleCheckout = tasks.findByPath(':example-checkout:uploadToAppLive')
    def testExampleShop = tasks.findByPath(':example-shop:uploadToAppLive')
    dependsOn testExampleCheckout
    dependsOn testExampleShop
    testExampleShop.mustRunAfter(testExampleCheckout)
}