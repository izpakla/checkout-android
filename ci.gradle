/*
 * Gradle file containing the tasks to build, test and publish the Android Checkout SDK
 * from a CI system
 */

task buildCheckout() {
    dependsOn ':checkout:assembleRelease'
}

task testCheckout() {
    dependsOn ':checkout:test'
}

task publishShapshot() {
    dependsOn ':checkout:publishSnapshot'
}

task publishRelease() {
    dependsOn ':checkout:publishRelease'
}

task testExampleApps() {
    def testExampleCheckout = tasks.findByPath(':example-checkout:executeTestsOnAppAutomate')
    def testExampleShop = tasks.findByPath(':example-shop:executeTestsOnAppAutomate')
    dependsOn testExampleCheckout
    dependsOn testExampleShop
    testExampleShop.mustRunAfter(testExampleCheckout)
}

task uploadExampleCheckout() {
    print "TEST: " + System.getenv('BROWSERSTACK_TEST')
    dependsOn ':example-checkout:uploadToAppLive'
}