/*
 * Gradle file with tasks for uploading the ExampleShop app to Browserstack
 */

task uploadToAppLive {
    if (!(rootProject.browserStackUser && rootProject.browserStackKey)) {
        logger.warn('[BROWSERSTACK] Missing credentials')
        return
    }
    dependsOn('uploadExampleShopDebugToBrowserstackAppLive')
}

task runFunctionalTest {
    if (!(rootProject.checkoutBaseUrl && rootProject.checkoutAuthHeader)) {
        logger.warn('[BROWSERSTACK] Missing functional test settings')
        return
    }
    if (!(rootProject.browserStackUser && rootProject.browserStackKey)) {
        logger.warn('[BROWSERSTACK] Missing credentials')
        return
    }
    dependsOn('executeExampleShopDebugTestsOnBrowserstack')
}

browserStackConfig {
    username = rootProject.browserStackUser
    accessKey = rootProject.browserStackKey
    configFilePath = 'example-shop/browserstack.json'
}